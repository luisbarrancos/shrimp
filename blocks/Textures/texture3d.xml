<shrimp type="function" name="Texture3d" description="Lookups on bake3d files" author="rconstruct">
	<input name="bakefile" description="Baked map filename" storage="uniform" type="string" default="&quot;&quot;"/>
	<input name="PP" description="Surface point" type="point" default="P"/>
	<input name="NN" description="Surface normal" type="normal" default="normalize(N)"/>
	<input name="coordsys" description="Coordinate system" storage="uniform" type="string" default="&quot;world&quot;"/>
	<input name="filterradius" description="Filter radius" type="float" default="1"/>
	<input name="filterscale" description="Filter scale" type="float" default="1"/>
	<input name="interpolate" description="Toggle interpolation" type="float" default="1"/>
	<input name="maxdepth" description="Maximum lookup depth" type="float" default="1"/>
	<input name="datachannel" descriptioN="Data channel to query" storage="uniform" type="string" default="&quot;&quot;"/>
	<output name="value" description="Value associated with data channel" type="float point vector normal color matrix"/>
	<output name="status" description="Status" type="float"/>
	<code>
	#if RENDERER==pixie
		$(status) = texture3d( $(bakefile), $(PP), $(NN),
							"coordsystem", $(coordsys),
							"interpolate", $(interpolate), 
							"radius", $(filterradius),
							"radiusscale", $(filterscale),
							$(datachannel), $(value) );
		
	#elif RENDERER==_3delight
		$(status) = texture3d( $(bakefile), $(PP), $(NN),
								"coordsystem", $(coordsys),
								"filterradius", $(filterradius),
								"filterscale", $(filterscale),
								"maxdepth", $(maxdepth),
								$(datachannel), $(value) );
		
	#elif RENDERER==prman
		$(status) = texture3d( $(bakefile), $(PP), $(NN),
								"coordsystem", $(coordsys),
								"filterradius", $(filterradius),
								"filterscale", $(filterscale),
								"maxdepth", $(maxdepth),
								"lerp", $(interpolate),
								$(datachannel), $(value) );
	#elif RENDERER==air
		$(status) = texture3d( $(bakefile), $(PP), $(NN),
								"width", $(filterscale),
								"blur", $(filterradius),
								$(datachannel), $(value) );

	#else
		$(value) = 0;
		$(status) = 0;
	#endif
			
	</code>
<usage>Performs a lookup of the supplied data pair, on files created by bake3d(). Returns 1 if sucessfull, 0 if failed.</usage>
</shrimp>
