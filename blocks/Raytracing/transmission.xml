<shrimp name="Transmission" type="function" description="Determines visibility between point 1 and point 2" author="rconstruct">
    <input name="pointfrom" description="From point" type="point" default="point &quot;shader&quot; (0,0,0)"/>
	<input name="pointto" description="To point" type="point" default="Ps"/>
	<input name="samples" description="Samples" type="float" default="1"/>
	<input name="minsamples" description="Minimum samples"  type="float" default="1"/>
	<input name="samplecone" description="Sample cone" type="float" default="0"/>
	<input name="samplebase" description="Sample base" type="float" default="1"/>
    <input name="bias" description="Ray bias" storage="uniform" type="float" default="-1"/>
	<input name="hitsides" description="Which sides to hit" storage="uniform" type="string" default="&quot;both&quot;"/>
	<input name="hitmode" description="Transmission hit mode" storage="uniform" type="string" default="&quot;default&quot;"/>
	<input name="label" description="Labels to associate the rays with" storage="uniform" type="string" default="&quot;&quot;"/>
	<input name="subset" description="Set of objects to consider for ray tracing" storage="uniform" type="string" default="&quot;&quot;"/>
	<input name="maxdist" description="Maximum ray distance" storage="uniform" type="float" default="1e38"/>
	<output name="Ctr" description="Shaded color" type="color"/>
	<rsl_code>
	#ifdef RAYOPTIONS
	#undef RAYOPTIONS
	#endif

	#if RENDERER==_3delight
	#define RAYOPTIONS	"label", $(label), "subset", $(subset), "bias", \
						$(bias), "hitmode", $(hitmode), "samplecone", \
						$(samplecone), "samples", $(samples)
	#elif RENDERER==pixie
	#define RAYOPTIONS	"samples", $(samples), "bias", $(bias), "samplecone", \
						$(samplecone), "sampleBase", $(samplebase), \
						"maxdist", $(maxdist), "label", $(label)
	#elif RENDERER==prman
	#define RAYOPTIONS	"samples", $(samples), "minsamples", $(minsamples), \
						"samplecone", $(samplecone), "samplebase", \
						$(samplebase), "bias", $(bias), "label", $(label), \
						"subset", $(subset), "hitmode", $(hitmode)
	#else
	#define NOSHADEOP
	#endif

	/* Seems only 3delight, prman, and pixie have transmission() shadeop */
	#ifdef NOSHADEOP
		$(Ctr) = color(1);
	#else
		$(Ctr) = transmission( $(pointfrom), $(pointto), RAYOPTIONS );
	#endif

	</rsl_code>
    <usage>Returns the color that flows from point 1 to point 2. Returns 1 if not implemented, or if raytracing is not available. Check your renderer's documentations, since this shadeop varies considerably with each renderer implementation. Note however that this is typically used to get the amount of transmitted light between "from" point, to "to" point.</usage>
</shrimp>
